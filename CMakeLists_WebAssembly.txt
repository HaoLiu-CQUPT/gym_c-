# CMakeLists.txt for WebAssembly build
# 使用方法：需要安装Qt for WebAssembly工具链

cmake_minimum_required(VERSION 3.18)
project(GymManagementSystem)

set(CMAKE_CXX_STANDARD 11)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

# 设置WebAssembly相关选项
set(CMAKE_SYSTEM_NAME WASI)
set(CMAKE_SYSTEM_PROCESSOR wasm32)

# 查找Qt6（WebAssembly通常使用Qt6）
find_package(Qt6 REQUIRED COMPONENTS Core Widgets Gui)

# 包含头文件目录
include_directories(${CMAKE_CURRENT_SOURCE_DIR})

# 源文件
set(SOURCES
    main.cpp
    mainwindow.cpp
    loginwindow.cpp
    memberdialog.cpp
    coachdialog.cpp
    coursedialog.cpp
    equipdialog.cpp
    reservationdialog.cpp
    statisticsdialog.cpp
    user.cpp
    member.cpp
    coach.cpp
    course.cpp
    equipment.cpp
    reservation.cpp
    datamanager.cpp
)

# 头文件
set(HEADERS
    mainwindow.h
    loginwindow.h
    memberdialog.h
    coachdialog.h
    coursedialog.h
    equipdialog.h
    reservationdialog.h
    statisticsdialog.h
    user.h
    member.h
    coach.h
    course.h
    equipment.h
    reservation.h
    datamanager.h
)

# 自动处理Qt的MOC
set(CMAKE_AUTOMOC ON)
set(CMAKE_AUTOUIC ON)
set(CMAKE_AUTORCC ON)

# 创建可执行文件
add_executable(${PROJECT_NAME} ${SOURCES} ${HEADERS})

# 链接Qt库
target_link_libraries(${PROJECT_NAME}
    Qt6::Core
    Qt6::Widgets
    Qt6::Gui
)

# WebAssembly特定设置
# 注意：需要修改datamanager.cpp使用Web存储而不是文件系统

